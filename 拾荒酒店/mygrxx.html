<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="utf-8" />
	<title>个人信息</title>
	<link rel="stylesheet" type="text/css" href="css/public.css" />
	<link rel="stylesheet" type="text/css" href="css/mygrxx.css" />
	<script src="https://cdn.bootcss.com/vue/2.6.10/vue.min.js"></script>
	<script src="https://cdn.bootcss.com/qs/6.7.0/qs.min.js"></script>
	<script src="https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.min.js"></script>
	<script src="js/getUrlParam.js"> </script>
</head>

<body>
	<div id="app">
		<!------------------------------head------------------------------>
		<div class="head">
			<div class="wrapper clearfix">
				<div class="clearfix" id="top">
					<h1 class="fl"><a href="index.html"><img src="img/logo.png" /></a></h1>
					<div class="fr clearfix" id="top1" style="margin-top: 2%;">
						<p v-if="loginCheck" class="fl">
							<a href="login.html">登录</a>
							<a href="reg.html">注册</a>
						</p>
						<p v-else class="fl">
							欢迎您,{{name}}
						</p>

						<form action="#" method="get" class="fl">
							<input type="text" placeholder="热门搜索：优质房间" />
							<input type="button" />
						</form>
					</div>
				</div>

			</div>
		</div>
		<!------------------------------idea------------------------------>


		<!------------------------------Bott------------------------------>
		<div class="Bott">
			<div class="wrapper clearfix">

				<div class="you fl">
					<h2>填充信息</h2>
					<div class="gxin">
						<!-- <div class="tx" style="margin-top: 0%"><a href="#"><img src="img/tx.png" />
								<p id="avatar">修改头像</p>
							</a></div> -->
						<div class="xx">
							<h3 class="clearfix"><strong class="fl">基础资料</strong><a href="#" class="fr"
									id="edit1">填充</a></h3>
							<div>姓名：{{name}}</div>
							<div>性别：{{chinasex}}</div>
							<div>身份证号：{{information.a1}}</div>
							<!-- <div>邮箱：{{reallemail}}</div> -->
							<div>地址：{{information.a2}}</div>
							<div>联系方式：{{information.a3}}</div>
							<div style="width: 100px;height:35px;margin: auto;"><button @click="TO" style="width: 100%;height:100%;border-radius:10px;border:1px soild white;background-color: #c10000;color:white;">进入</button></div>
							<div style="margin: auto;color: #c10000;" v-show="show">请点击右上角填充按钮，填充信息。</div>
						</div>
					</div>
				</div>
			</div>
			<!--footer-->
			<div class="footer">
				<div class="top">
					<div class="wrapper">
						<div class="clearfix">
							<a href="#2" class="fl"><img src="img/foot1.png" /></a>
							<span class="fl">节假日度假酒店</span>
						</div>
						<div class="clearfix">
							<a href="#2" class="fl"><img src="img/foot2.png" /></a>
							<span class="fl">观景区酒店</span>
						</div>
						<div class="clearfix">
							<a href="#2" class="fl"><img src="img/foot3.png" /></a>
							<span class="fl">情侣双人减半</span>
						</div>
						<div class="clearfix">
							<a href="#2" class="fl"><img src="img/foot4.png" /></a>
							<span class="fl">食物特色服务</span>
						</div>
					</div>
				</div>
				<p class="dibu">拾荒&copy;2018-2019公司版权所有 苏ICP备080100-44备0000111000号<br />
					违法和不良信息举报电话：159-5051-9615，本网站所有数据均来源于互联网，若有侵权，联系删除</p>
			</div>
		</div>
		<!--遮罩-->
		<div class="mask"></div>
		<!--编辑弹框-->
		<div class="bj">
			<div class="clearfix"><a href="#" class="fr gb"><img src="img/icon4.png" /></a></div>
			<h3>填充资料</h3>
			<form action="#" method="get">
				<p><label>姓名：</label><input type="text" v-model="reallname"/></p>
				<p><label>证件：</label><input type="text" v-model="user.userid"  /></p>
				<p>
					<label>性别：</label>
					<span><input type="radio" name="light" @click="checksex" />男</span>
					<span><input type="radio" name="light" @click="checksex2" />女</span>
				</p>
				<!-- <p><label>邮箱：</label><input type="text" v-model="reallemail" value="XX" /></p> -->
				<p><label>地址：</label><input type="text" v-model="user.address" /></p>
				<p><label>电话：</label><input type="text" v-model="user.phone" /></p>
				<div class="bc">
					<input type="button" value="保存" @click="TOhome" />
					<input type="button" value="取消" />
				</div>
			</form>
		</div>
		<!--高级设置修改-->
		<div class="xg">
			<div class="clearfix"><a href="#" class="fr gb"><img src="img/icon4.png" /></a></div>
			<h3>切换账号地区</h3>
			<form action="#" method="get">
				<p><label>姓名：</label><input type="text" value="lisi" /></p>
				<div class="bc">
					<input type="button" value="保存" />
					<input type="button" value="取消" />
				</div>
			</form>
		</div>

	</div>

	<script>
		// axios.defaults.withCredentials = true

		var vm = new Vue({
			el: '#app',
			data: {
				loginCheck: false,
				show:false,
				name: null,
				userdata: '',
				reallname: '',
				reallemail: '',
				array: [],
				array2:[],
				str: '',
				chinasex: '',
				user: {
					id: '',
					userid: '',
					address: '',
					phone: '',
					sex: ''
				},
				information:{
					  a1:'',
					  a2:'',
					  a3:''
				}

			},
			mounted() {
				this.userdata = UrlParam.paramValues("username");
				// console.log(this.userdata)
				this.str = this.userdata[0]
				this.array = this.str.split('?')
				this.name = this.array[0]
				this.user.id = this.array[1]
				this.getData()

			},
			methods: {

				TOhome() {

					this.upDate()
					setTimeout(function(){

						location.reload("mygrxx.html");

					},500)
				},
				
				TO(){
                     
					 if(this.information.a1){
						 this.show=false;
						 window.location.href = "home.html?name="+this.name;}
					 else{this.show=true; }
				},

				checksex() {
					this.user.sex = 0;
					// this.chinasex = '男'
				},
				checksex2() {
					this.user.sex = 1;
					// this.chinasex = '女'
				},

				upDate() {

					var update = JSON.stringify(this.user);
					axios({
						method: 'post',
						url: 'http://localhost:8888/users/updateByPrimaryKeySelective',
						headers: {
							"Content-Type": "application/json"

						},

						data: update

					}).then((result) => {
						// console.log(result)

					})

				},

				getData() {

					var login = JSON.stringify(this.login);
					axios({
						method: 'post',
						url: 'http://localhost:8888/users/selectAll',
						headers: {
							"Content-Type": "application/json"

						},

					}).then((result) => {
						this.login = result.data[parseInt(this.user.id)-1]
						// console.log(this.login)
						this.information.a1=this.login.userid
						this.information.a2=this.login.address
						this.information.a3=this.login.phone
						if(this.login.sex=='0'){this.chinasex='男'}
						else{this.chinasex='女'}
					})

				},







			}
		})
	</script>
	<script src="js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/public.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/user.js" type="text/javascript" charset="utf-8"></script>

</body>

</html>